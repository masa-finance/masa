.PHONY: install dev-install test lint format clean docs build bump-version

# Install the package
install:
	pip install .

# Install the package in editable mode with development dependencies
dev-install:
	pip install -e ".[dev]"

# Run tests
test:
	pytest tests/

# Run linter
lint:
	flake8 src/masa tests

# Format code
format:
	black src/masa tests

# Clean up build artifacts
clean:
	rm -rf build dist .egg *.egg-info
	find . -type d -name '__pycache__' -exec rm -rf {} +

# Bump the version number
bump-version:
	bump2version patch

# Generate documentation
docs:
	cd docs && make html

# Build the package
build:
	python -m build

# Run the CLI tool
run:
	python -m masa $(ARGS)



# Create a new release
release: clean bump-version build
	twine upload --repository pypi dist/*

test-release: clean bump-version build
	twine upload --repository testpypi dist/*

# Set up pre-commit hooks
setup-hooks:
	pre-commit install

# Update dependencies
update-deps:
	pip-compile --upgrade pyproject.toml

